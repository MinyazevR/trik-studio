name: Set up Action
   
on:
  workflow_call:
    inputs:
      os:
        required: true
        type: string
      artifact_pattern:
        required: true
        type: string

jobs:
  download:
    runs-on: ${{ inputs.os }}
    container:
      image: ${{ inputs.container_name }}
      options: >
        -v ${{ github.workspace }}:${{ github.workspace }} 
        -w ${{ github.workspace }}
        
    steps:
    - name: Configure git
      run: |
          git config --global core.symlinks true
          git config --global core.autocrlf input

    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        submodules: recursive
        fetch-depth: 0
        
    - name: Download All Artifacts
      uses: actions/download-artifact@v4
      with:
        path: ${{ github.workspace }}
        name: ${{ runner.os }}-installer-${{ github.sha }}
        merge-multiple: true

    # - name: Install trik-studio
    #   run: ./auto-install-trik-studio.sh
      
    # - name: Checks dlls
    #   run: ./check-dlss

    # - name: Reinstall trik-studio
    #   run: REINSTALL=1 ./auto-install-trik-studio.sh

    # - name: Checks dlls
    #   run: ./check-dlss

    # - name: Run tests with checkapp
    #   run: ./trik-checkapp --fields-dir=/ --solution-dir=/

      
    
